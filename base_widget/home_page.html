<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.0.min.css" />
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.tmpl.js"></script>
<script type="text/javascript" src="your_html.js"></script>

<script type="text/javascript" src="jquery.mobile-1.0.min.js"></script>
</head>
<body>
<div data-role="page">
    <div data-role='header' data-position='fixed' data-theme='d'>
<a href="#" data-icon='alert' data-transition="pop">GTLogin</a>
<h1>Sample Widget</h1>
<a href="#" data-icon='add' data-transition="pop">Other</a>
    </div>

<div id="content" data-role="content">
<ul id="friends_list" data-role="listview" data-inset="false" data-filter="true" data-theme="c" data-divider-theme="b">
<script id="nearby_friends_row_div_template" type="text/x-jquery-tmpl">
<li class="friend_row_div" id="location_${id}" data-role="list-divider">
${location}
</li>
</script>
<script id="nearby_friends_row_template" type="text/x-jquery-tmpl">
<li class="friend_row" id="friend_${id}">
<h1>${name}</h1>
</li>
</script>
</ul>
</div>

<script>
var data = [];
var i = 0;
data[i++] = {"id":"npapin3", "name":"Nicolas Papin", "locid":"0"};
data[i++] = {"id":"bboberson", "name":"Bob Boberson", "locid":"1"};
data[i++] = {"id":"1", "name":"1", "locid":"0"};
data[i++] = {"id":"4", "name":"4", "locid":"1"};
data[i++] = {"id":"2", "name":"2", "locid":"0"};
data[i++] = {"id":"5", "name":"5", "locid":"1"};
data[i++] = {"id":"3", "name":"3", "locid":"0"};
data[i++] = {"id":"6", "name":"6", "locid":"1"};

locations = [];
locations[0] = {"id":"0", "location":"CULC"};
locations[1] = {"id":"1", "location":"Klaus"};

var dataLoc = {};

for(var d in data)
{
if(dataLoc[data[d].locid] == undefined)
dataLoc[data[d].locid] = [];

dataLoc[data[d].locid].push(data[d]);
}

for(var loc in locations)
{
$("#nearby_friends_row_div_template").tmpl(locations[loc]).appendTo("#friends_list");
$("#nearby_friends_row_template").tmpl(dataLoc[locations[loc].id]).appendTo("#friends_list");
}

$.mobile.fixedToolbars.setTouchToggleEnabled(false);
</script>

<div data-role="footer" data-position="fixed">
<div data-role="navbar">
<ul>
<li><a href="#">Check In</a></li>
<li><a href="#">Friends</a></li>
<li><a href="#">Map</a></li>
<li><a href="#">Settings</a></li>
</ul>
</div>
</div>
<div>
</body>
</html>
